<form  [formGroup] = "bookingForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
        <label>Name</label>
        <input required type="text" class="form-control" formControlName="name" [class.is-invalid]="name.invalid && name.touched">
        <div *ngIf="name.invalid && name.touched">
            <small *ngIf="name.errors.required" class="text-danger" >Name is required</small>
            <small *ngIf="name.errors.minlength" class="text-danger">Name must be at least 3 characters</small>
        </div>  
    </div>

    <div class="form-group">
        <label>Email</label>
        <input required type="email" class="form-control" formControlName="email" [class.is-invalid]="email.invalid && email.touched"
        placeholder="email@example.com">
        <div *ngIf="email.invalid && email.touched">
            <small *ngIf="email.errors.required" class="text-danger" >Email is required</small>
            <small *ngIf="email.errors.pattern" class="text-danger" >Email is invalid</small>
        </div>  
    </div>

    <div class="form-group">
        <label>Phone Number</label>
        <input required type="text" class="form-control" formControlName="phoneNumber" [class.is-invalid]="phoneNumber.invalid && phoneNumber.touched">
        <div *ngIf="phoneNumber.invalid && phoneNumber.touched">
            <small *ngIf="phoneNumber.errors.required" class="text-danger" >Phone number is required</small>
            <small *ngIf="phoneNumber.errors.pattern" class="text-danger">Phone number is invalid</small>
        </div>  
    </div>

    <div class="form-row">
        <div class="form-group col">
            <label for="company">Company</label>
            <select class="custom-select" (change)="changeCompany($event.target.value)">
                <option *ngFor="let company of companies" [value]="company.id" >
                 {{company.name}}
                </option>
             </select>
        </div>

        <div class="form-group col">
            <label for="service">Service</label>
            <select class="custom-select" (change)="changeService($event.target.value)">
                <option *ngFor="let service of companyServices" [value]="service.sk" >
                 {{service.name}}
                </option>
             </select>
        </div>
    </div>

    <div class="form-group">
        <label>Availability</label>
        <div *ngIf="companyServices.length > 0">
            <p class="form-group col" *ngFor="let day of service.aviability">{{day.day}}: {{day.startHour}} - {{day.endHour}}</p>
        </div>
        <p *ngIf="companyServices.length == 0">This company has no services yet. Please choose another company.</p>
    </div>

    <div class="form-row" formGroupName="slot">
        <label>Slot</label>
        <div class="form-group col">
            <input ngbDatepicker required [minDate]="minDate" class="form-control" type="date" formControlName="date" [class.is-invalid]="date.invalid && date.touched">
            <div *ngIf="date.invalid && date.touched">
                <small *ngIf="date.errors.required" class="text-danger" >Date is required</small>
                <small *ngIf="date.errors.invalidDate" class="text-danger">Date not available</small>
            </div>
        </div>

        <div class="form-group col">
            <input required class="form-control" type="time" formControlName="startHour" [class.is-invalid]="startHour.invalid && startHour.touched">
            <div *ngIf="startHour.invalid && startHour.touched">
                <small *ngIf="startHour.errors.required" class="text-danger" >Time is required</small>
                <small *ngIf="startHour.errors.invalidHour" class="text-danger">Time not available</small>
            </div>
        </div>
        
    </div>

    <button type="submit" class="btn btn-outline-dark" [disabled]="!bookingForm.valid">Submit</button>
    <br>
    <br>
</form>